{"version":3,"file":"index.cjs","sources":["../../../src/effects/N8AO/index.tsx"],"sourcesContent":["// From https://github.com/N8python/n8ao\n// https://twitter.com/N8Programs/status/1660996748485984261\n\nimport { Ref, forwardRef, useLayoutEffect, useMemo } from 'react'\n/* @ts-ignore */\nimport { N8AOPostPass } from './N8AOPostPass'\nimport { useThree, ReactThreeFiber, applyProps } from '@react-three/fiber'\n\ntype N8AOProps = {\n  aoRadius?: number\n  distanceFalloff?: number\n  intensity?: number\n  quality?: 'performance' | 'low' | 'medium' | 'high' | 'ultra'\n  aoSamples?: number\n  denoiseSamples?: number\n  denoiseRadius?: number\n  color?: ReactThreeFiber.Color\n  halfRes?: boolean\n  depthAwareUpsampling?: boolean\n  screenSpaceRadius?: boolean\n  renderMode?: 0 | 1 | 2 | 3 | 4\n}\n\nexport const N8AO = forwardRef<N8AOPostPass, N8AOProps>(\n  (\n    {\n      halfRes,\n      screenSpaceRadius,\n      quality,\n      depthAwareUpsampling = true,\n      aoRadius = 5,\n      aoSamples = 16,\n      denoiseSamples = 4,\n      denoiseRadius = 12,\n      distanceFalloff = 1,\n      intensity = 1,\n      color,\n      renderMode = 0,\n    },\n    ref: Ref<N8AOPostPass>\n  ) => {\n    const { camera, scene } = useThree()\n    const effect = useMemo(() => new N8AOPostPass(scene, camera), [])\n    useLayoutEffect(() => {\n      applyProps(effect.configuration, {\n        color,\n        aoRadius,\n        distanceFalloff,\n        intensity,\n        aoSamples,\n        denoiseSamples,\n        denoiseRadius,\n        screenSpaceRadius,\n        renderMode,\n        halfRes,\n        depthAwareUpsampling,\n      })\n    }, [\n      screenSpaceRadius,\n      color,\n      aoRadius,\n      distanceFalloff,\n      intensity,\n      aoSamples,\n      denoiseSamples,\n      denoiseRadius,\n      renderMode,\n      halfRes,\n      depthAwareUpsampling,\n    ])\n    useLayoutEffect(() => {\n      if (quality) effect.setQualityMode(quality.charAt(0).toUpperCase() + quality.slice(1))\n    }, [quality])\n    return <primitive ref={ref} object={effect} />\n  }\n)\n"],"names":["forwardRef","useThree","useMemo","N8AOPostPass","useLayoutEffect","applyProps","jsx"],"mappings":";;;;;;AAuBO,MAAM,OAAOA,MAAA;AAAA,EAClB,CACE;AAAA,IACE;AAAA,IACA;AAAA,IACA;AAAA,IACA,uBAAuB;AAAA,IACvB,WAAW;AAAA,IACX,YAAY;AAAA,IACZ,iBAAiB;AAAA,IACjB,gBAAgB;AAAA,IAChB,kBAAkB;AAAA,IAClB,YAAY;AAAA,IACZ;AAAA,IACA,aAAa;AAAA,KAEf,QACG;AACH,UAAM,EAAE,QAAQ,MAAM,IAAIC,MAAS,SAAA;AAC7B,UAAA,SAASC,cAAQ,MAAM,IAAIC,aAAAA,aAAa,OAAO,MAAM,GAAG,CAAA,CAAE;AAChEC,UAAAA,gBAAgB,MAAM;AACpBC,YAAA,WAAW,OAAO,eAAe;AAAA,QAC/B;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MAAA,CACD;AAAA,IAAA,GACA;AAAA,MACD;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,CACD;AACDD,UAAAA,gBAAgB,MAAM;AAChB,UAAA;AAAgB,eAAA,eAAe,QAAQ,OAAO,CAAC,EAAE,gBAAgB,QAAQ,MAAM,CAAC,CAAC;AAAA,IAAA,GACpF,CAAC,OAAO,CAAC;AACZ,WAAQE,2BAAAA,IAAA,aAAA,EAAU,KAAU,QAAQ,OAAQ,CAAA;AAAA,EAC9C;AACF;;"}